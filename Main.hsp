//--------------------------------------------------------------------------------------------------
//= Main.hsp
//--------------------------------------------------------------------------------------------------
//	メインソース
//--------------------------------------------------------------------------------------------------

	#define PROGRAM_NAME		"DesktopCapture"
	#define PROGRAM_VERSION		"0.02"

	//----------------------------------------------------------------------------------------------
	//= ヘッダーファイルをインクルード
	//----------------------------------------------------------------------------------------------
		#include "define_h.hsp"
		#include "module_h.hsp"

	//----------------------------------------------------------------------------------------------
	//= 初期化
	//----------------------------------------------------------------------------------------------
		#include "Init.hsp"

	//----------------------------------------------------------------------------------------------
	//= 範囲選択ループ
	//----------------------------------------------------------------------------------------------
		*__Select
			gsel SCR_SELECT
			#include "SelectCalc.hsp"
			#include "SelectGdraw.hsp"
			if( CaptureStartFlag == TRUE ){
				goto *__SelectToEdit
			}
			wait WAITIME
		goto *__Select

	//----------------------------------------------------------------------------------------------
	//= 範囲選択ループから編集ループへ移る際の引継ぎ処理
	//----------------------------------------------------------------------------------------------
		*__SelectToEdit
			//スクリーンショット撮影
			buffer SCR_SSBUF, CaptureSizeW, CaptureSizeH
			GetScreenShot CapturePosX, CapturePosY, CaptureSizeW, CaptureSizeH
			//編集ウィンドウ初期化
			screen SCR_EDIT
		goto *__Edit

	//----------------------------------------------------------------------------------------------
	//= 編集ループ
	//----------------------------------------------------------------------------------------------
		*__Edit
			gsel SCR_EDIT
			#include "EditCalc.hsp"
			#include "EditGdraw.hsp"
			wait WAITTIME
		goto *__Edit

	//----------------------------------------------------------------------------------------------
	//= 終了処理
	//----------------------------------------------------------------------------------------------
		*__end
			end