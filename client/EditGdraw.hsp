//--------------------------------------------------------------------------------------------------
//= EditGdraw.hsp
//--------------------------------------------------------------------------------------------------
//	編集ウィンドウの描画処理
//--------------------------------------------------------------------------------------------------

	//----------------------------------------------------------------------------------------------
	//= 更新停止
	//----------------------------------------------------------------------------------------------
		redraw 0

	//----------------------------------------------------------------------------------------------
	//= 画面初期化
	//----------------------------------------------------------------------------------------------
		syscolor 16:boxf

	//----------------------------------------------------------------------------------------------
	//= キャプチャしたスクリーンショットを描画
	//----------------------------------------------------------------------------------------------
		//縁
		color 0, 0, 0
		boxf EditPosX-1, EditPosY-1, EditPosX+CaptureSizeW, EditPosY+CaptureSizeH
		//SS
		gmode 0
		pos EditPosX, EditPosY
		gcopy SCR_SSBUF, 0, 0, CaptureSizeW, CaptureSizeH

	//----------------------------------------------------------------------------------------------
	//= 描いたペンを描画
	//----------------------------------------------------------------------------------------------
		gmode 4, , , 256:COLSET_ALPHA
		pos EditPosX, EditPosY
		gcopy SCR_PENBUF, 0, 0, CaptureSizeW, CaptureSizeH

	//----------------------------------------------------------------------------------------------
	//= ペンのサイズ描画
	//----------------------------------------------------------------------------------------------
		x = MousePosX() : y = MousePosY()
		//消しゴム中は/2しない
		if( GetKeyInput(MO_RIGHT) == 0 ){
			eps = EditPenSize/2
		} else {
			eps = EditPenSize
		}
		color RefToR(EditPenColor), RefToG(EditPenColor), RefToB(EditPenColor)
		circle x-eps, y-eps, x+eps+1, y+eps+1, 0

	//----------------------------------------------------------------------------------------------
	//= パレットバー
	//----------------------------------------------------------------------------------------------
		x = PALETTEBAR_POS_X	: y = PALETTEBAR_POS_Y
		w = PALETTEBAR_SIZE_W	: h = PALETTEBAR_SIZE_H
		//バー
		syscolor 4	: boxf x, y, x+w, y+h
		syscolor 21	: boxf x, y+h, x+w, y+h
		//ボタン
		mgButtonDraw

	//----------------------------------------------------------------------------------------------
	//= コントロールバー
	//----------------------------------------------------------------------------------------------
		x = CTRLBAR_POS_X	: y = CTRLBAR_POS_Y
		w = CTRLBAR_SIZE_W	: h = CTRLBAR_SIZE_H
		//バー
		syscolor 4	: boxf x, y, x+w, y+h
		syscolor 21	: boxf x, y, x+w, y

	//----------------------------------------------------------------------------------------------
	//= 再描画
	//----------------------------------------------------------------------------------------------
		redraw 1